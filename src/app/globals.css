/* ========================================
   STORYLINE - NEUMORPHIC DESIGN SYSTEM
   Inspired by soft, modern UI aesthetics
   ======================================== */

/* ========== CSS Reset ========== */
*,
*::before,
*::after {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

/* ========== Root Variables ========== */
:root {
  /* Core Colors - Neumorphic Light Theme */
  --color-bg-base: #E4E9F0;
  --color-bg-light: #EEF2F7;
  --color-bg-dark: #D1D9E6;

  /* Card & Surface Colors */
  --color-surface: #E4E9F0;
  --color-surface-raised: #EAEFF5;
  --color-surface-sunken: #D8DEE8;

  /* Accent - Coral/Orange (PRIMARY) */
  --color-accent: #FF6B54;
  --color-accent-light: #FF8A78;
  --color-accent-dark: #E85A45;

  /* Secondary Accent - Blue */
  --color-secondary: #6C8EF2;
  --color-secondary-light: #8BA6F7;
  --color-secondary-dark: #5A7DE0;

  /* Status Colors */
  --color-success: #22C55E;
  --color-success-light: #4ADE80;
  --color-success-dark: #16A34A;
  --color-warning: #F59E0B;
  --color-warning-light: #FBBF24;
  --color-warning-dark: #D97706;
  --color-danger: #EF4444;
  --color-danger-light: #F87171;
  --color-danger-dark: #DC2626;
  --color-info: #3B82F6;
  --color-info-light: #60A5FA;
  --color-info-dark: #2563EB;

  /* Text Colors */
  --color-text-primary: #2D3748;
  --color-text-secondary: #4A5568;
  --color-text-tertiary: #718096;
  --color-text-muted: #A0AEC0;
  --color-text-on-accent: #FFFFFF;

  /* Gradients */
  --gradient-accent: linear-gradient(135deg, var(--color-accent), var(--color-accent-light));
  --gradient-secondary: linear-gradient(135deg, var(--color-secondary), var(--color-secondary-light));
  --gradient-success: linear-gradient(135deg, var(--color-success), var(--color-success-light));
  --gradient-danger: linear-gradient(135deg, var(--color-danger), var(--color-danger-light));
  --gradient-warning: linear-gradient(135deg, var(--color-warning), var(--color-warning-light));

  /* Neumorphic Shadows */
  --shadow-neu-raised:
    8px 8px 16px rgba(163, 177, 198, 0.6),
    -8px -8px 16px rgba(255, 255, 255, 0.8);
  --shadow-neu-raised-sm:
    4px 4px 8px rgba(163, 177, 198, 0.5),
    -4px -4px 8px rgba(255, 255, 255, 0.8);
  --shadow-neu-pressed:
    inset 4px 4px 8px rgba(163, 177, 198, 0.6),
    inset -4px -4px 8px rgba(255, 255, 255, 0.8);
  --shadow-neu-flat:
    6px 6px 12px rgba(163, 177, 198, 0.4),
    -6px -6px 12px rgba(255, 255, 255, 0.6);
  --shadow-accent-glow: 0 8px 24px rgba(255, 107, 84, 0.35);
  --shadow-success-glow: 0 8px 24px rgba(34, 197, 94, 0.35);
  --shadow-danger-glow: 0 8px 24px rgba(239, 68, 68, 0.35);
  --shadow-secondary-glow: 0 8px 24px rgba(108, 142, 242, 0.35);

  /* Focus Ring */
  --focus-ring: 0 0 0 3px rgba(255, 107, 84, 0.4);
  --focus-ring-secondary: 0 0 0 3px rgba(108, 142, 242, 0.4);

  /* Icon Sizes */
  --icon-xs: 14px;
  --icon-sm: 16px;
  --icon-md: 20px;
  --icon-lg: 24px;
  --icon-xl: 32px;

  /* Spacing */
  --space-1: 0.25rem;
  --space-2: 0.5rem;
  --space-3: 0.75rem;
  --space-4: 1rem;
  --space-5: 1.25rem;
  --space-6: 1.5rem;
  --space-8: 2rem;
  --space-10: 2.5rem;
  --space-12: 3rem;
  --space-16: 4rem;

  /* Border Radius */
  --radius-sm: 8px;
  --radius-md: 12px;
  --radius-lg: 16px;
  --radius-xl: 24px;
  --radius-2xl: 32px;
  --radius-3xl: 40px;
  --radius-full: 9999px;

  /* Typography */
  --font-sans: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  --font-reading: 'Literata', Georgia, serif;

  --text-xs: 0.75rem;
  --text-sm: 0.875rem;
  --text-base: 1rem;
  --text-lg: 1.125rem;
  --text-xl: 1.25rem;
  --text-2xl: 1.5rem;
  --text-3xl: 2rem;
  --text-4xl: 2.5rem;
  --text-5xl: 3rem;

  /* Transitions */
  --transition-fast: 150ms ease;
  --transition-base: 250ms ease;
  --transition-slow: 400ms ease;

  /* Z-Index Scale */
  --z-base: 0;
  --z-sticky: 100;
  --z-overlay: 200;
  --z-modal: 300;
  --z-popover: 400;

  /* Layout */
  --sidebar-width: 240px;
  --header-height: 80px;
  --content-max-width: 1400px;
}

/* Dark Theme - Neumorphic */
[data-theme="dark"] {
  --color-bg-base: #1A1D24;
  --color-bg-light: #21252D;
  --color-bg-dark: #13161C;

  --color-surface: #1A1D24;
  --color-surface-raised: #21252D;
  --color-surface-sunken: #13161C;

  --color-text-primary: #F7FAFC;
  --color-text-secondary: #E2E8F0;
  --color-text-tertiary: #A0AEC0;
  --color-text-muted: #718096;

  --shadow-neu-raised:
    8px 8px 16px rgba(0, 0, 0, 0.5),
    -8px -8px 16px rgba(40, 45, 55, 0.5);
  --shadow-neu-raised-sm:
    4px 4px 8px rgba(0, 0, 0, 0.4),
    -4px -4px 8px rgba(40, 45, 55, 0.4);
  --shadow-neu-pressed:
    inset 4px 4px 8px rgba(0, 0, 0, 0.4),
    inset -4px -4px 8px rgba(40, 45, 55, 0.4);
  --shadow-neu-flat:
    6px 6px 12px rgba(0, 0, 0, 0.4),
    -6px -6px 12px rgba(40, 45, 55, 0.3);
}

/* OLED Black Theme - True blacks for AMOLED screens */
[data-theme="oled"] {
  --color-bg-base: #000000;
  --color-bg-light: #0A0A0A;
  --color-bg-dark: #000000;

  --color-surface: #0A0A0A;
  --color-surface-raised: #141414;
  --color-surface-sunken: #000000;

  --color-accent: #FF6B54;
  --color-accent-light: #FF8A78;
  --color-accent-dark: #E85A45;

  --color-text-primary: #FFFFFF;
  --color-text-secondary: #E0E0E0;
  --color-text-tertiary: #999999;
  --color-text-muted: #666666;

  /* Minimal shadows for OLED - border-based approach */
  --shadow-neu-raised: 0 0 0 1px rgba(255, 255, 255, 0.1);
  --shadow-neu-raised-sm: 0 0 0 1px rgba(255, 255, 255, 0.08);
  --shadow-neu-pressed: inset 0 0 0 1px rgba(255, 255, 255, 0.1);
  --shadow-neu-flat: 0 2px 8px rgba(0, 0, 0, 0.8);
}

/* Sepia Theme - Warm, paper-like reading experience */
[data-theme="sepia"] {
  --color-bg-base: #F5ECD7;
  --color-bg-light: #FAF4E4;
  --color-bg-dark: #E8DBBF;

  --color-surface: #F5ECD7;
  --color-surface-raised: #FAF4E4;
  --color-surface-sunken: #EEE2C9;

  --color-accent: #8B4513;
  --color-accent-light: #A0522D;
  --color-accent-dark: #704010;

  --color-text-primary: #3D2B1F;
  --color-text-secondary: #5D4037;
  --color-text-tertiary: #795548;
  --color-text-muted: #9E8B7D;

  --shadow-neu-raised:
    6px 6px 12px rgba(139, 117, 85, 0.3),
    -6px -6px 12px rgba(255, 250, 240, 0.6);
  --shadow-neu-raised-sm:
    3px 3px 6px rgba(139, 117, 85, 0.25),
    -3px -3px 6px rgba(255, 250, 240, 0.5);
  --shadow-neu-pressed:
    inset 3px 3px 6px rgba(139, 117, 85, 0.3),
    inset -3px -3px 6px rgba(255, 250, 240, 0.5);
  --shadow-neu-flat:
    4px 4px 8px rgba(139, 117, 85, 0.2),
    -4px -4px 8px rgba(255, 250, 240, 0.4);
}

/* ========== Mobile-First Breakpoints ========== */
:root {
  /* Touch-friendly sizes */
  --touch-target: 44px;
  --touch-target-sm: 36px;

  /* Mobile header/nav heights */
  --header-height-mobile: 56px;
  --bottom-nav-height: 64px;

  /* Safe area insets for notched devices */
  --safe-area-top: env(safe-area-inset-top, 0px);
  --safe-area-bottom: env(safe-area-inset-bottom, 0px);
  --safe-area-left: env(safe-area-inset-left, 0px);
  --safe-area-right: env(safe-area-inset-right, 0px);
}

/* ========== Base Styles ========== */
html {
  font-size: 16px;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

body {
  font-family: var(--font-sans);
  background: var(--color-bg-base);
  color: var(--color-text-primary);
  line-height: 1.6;
  min-height: 100vh;
}

/* ========== Neumorphic Component Classes ========== */

/* Raised Card */
.neu-card {
  background: var(--color-surface);
  border-radius: var(--radius-xl);
  box-shadow: var(--shadow-neu-raised);
  transition: all var(--transition-base);
}

.neu-card:hover {
  transform: translateY(-2px);
  box-shadow:
    10px 10px 20px rgba(163, 177, 198, 0.6),
    -10px -10px 20px rgba(255, 255, 255, 0.8);
}

/* Pressed/Sunken Card */
.neu-card-pressed {
  background: var(--color-surface);
  border-radius: var(--radius-xl);
  box-shadow: var(--shadow-neu-pressed);
}

/* Flat Card (subtle) */
.neu-card-flat {
  background: var(--color-surface);
  border-radius: var(--radius-xl);
  box-shadow: var(--shadow-neu-flat);
}

/* Accent Button */
.neu-btn-accent {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-2);
  padding: var(--space-4) var(--space-6);
  background: var(--color-accent);
  color: white;
  border: none;
  border-radius: var(--radius-full);
  font-size: var(--text-sm);
  font-weight: 600;
  cursor: pointer;
  box-shadow: var(--shadow-accent-glow);
  transition: all var(--transition-base);
}

.neu-btn-accent:hover {
  background: var(--color-accent-light);
  transform: translateY(-2px);
  box-shadow: 0 12px 32px rgba(255, 107, 84, 0.45);
}

.neu-btn-accent:active {
  transform: translateY(0);
}

/* Ghost Button */
.neu-btn-ghost {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-2);
  padding: var(--space-3) var(--space-5);
  background: var(--color-surface);
  color: var(--color-text-secondary);
  border: none;
  border-radius: var(--radius-full);
  font-size: var(--text-sm);
  font-weight: 500;
  cursor: pointer;
  box-shadow: var(--shadow-neu-raised-sm);
  transition: all var(--transition-base);
}

.neu-btn-ghost:hover {
  color: var(--color-accent);
  box-shadow: var(--shadow-neu-raised);
}

.neu-btn-ghost:active {
  box-shadow: var(--shadow-neu-pressed);
}

/* Icon Button */
.neu-btn-icon {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 48px;
  height: 48px;
  background: var(--color-surface);
  color: var(--color-text-secondary);
  border: none;
  border-radius: var(--radius-full);
  cursor: pointer;
  box-shadow: var(--shadow-neu-raised-sm);
  transition: all var(--transition-base);
}

.neu-btn-icon:hover {
  color: var(--color-accent);
}

.neu-btn-icon:active {
  box-shadow: var(--shadow-neu-pressed);
}

/* Input Field */
.neu-input {
  width: 100%;
  padding: var(--space-4) var(--space-5);
  background: var(--color-surface);
  border: none;
  border-radius: var(--radius-xl);
  font-size: var(--text-base);
  color: var(--color-text-primary);
  box-shadow: var(--shadow-neu-pressed);
  outline: none;
  transition: all var(--transition-base);
}

.neu-input::placeholder {
  color: var(--color-text-muted);
}

.neu-input:focus {
  box-shadow:
    var(--shadow-neu-pressed),
    0 0 0 3px rgba(255, 107, 84, 0.2);
}

/* Circular Element */
.neu-circle {
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--color-surface);
  border-radius: var(--radius-full);
  box-shadow: var(--shadow-neu-raised);
}

/* Progress Ring */
.neu-progress-ring {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--color-surface);
  border-radius: var(--radius-full);
  box-shadow: var(--shadow-neu-raised);
}

/* ========== Avatar Styles ========== */
.avatar {
  width: 40px;
  height: 40px;
  border-radius: var(--radius-full);
  overflow: hidden;
  box-shadow: var(--shadow-neu-raised-sm);
}

.avatar img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.avatar-group {
  display: flex;
}

.avatar-group .avatar {
  margin-left: -12px;
  border: 3px solid var(--color-bg-base);
}

.avatar-group .avatar:first-child {
  margin-left: 0;
}

/* ========== Book Cover Style ========== */
.book-cover {
  aspect-ratio: 2/3;
  border-radius: var(--radius-lg);
  overflow: hidden;
  box-shadow: var(--shadow-neu-raised);
  transition: all var(--transition-base);
}

.book-cover img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.book-cover:hover {
  transform: scale(1.02);
  box-shadow:
    12px 12px 24px rgba(163, 177, 198, 0.6),
    -12px -12px 24px rgba(255, 255, 255, 0.8);
}

/* ========== Sidebar Navigation ========== */
.sidebar-nav {
  display: flex;
  flex-direction: column;
  gap: var(--space-2);
}

.sidebar-nav-item {
  display: flex;
  align-items: center;
  gap: var(--space-3);
  padding: var(--space-3) var(--space-4);
  background: transparent;
  border: none;
  border-radius: var(--radius-lg);
  font-size: var(--text-sm);
  font-weight: 500;
  color: var(--color-text-tertiary);
  cursor: pointer;
  transition: all var(--transition-base);
}

.sidebar-nav-item:hover {
  color: var(--color-text-primary);
  background: var(--color-surface-raised);
}

.sidebar-nav-item.active {
  color: var(--color-accent);
  background: var(--color-surface);
  box-shadow: var(--shadow-neu-raised-sm);
}

.sidebar-nav-item .icon {
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.sidebar-nav-item.active .icon {
  color: var(--color-accent);
}

/* ========== List Items - Neumorphic ========== */
.neu-list-item {
  display: flex;
  align-items: center;
  gap: var(--space-4);
  padding: var(--space-4);
  background: var(--color-surface);
  border-radius: var(--radius-xl);
  box-shadow: var(--shadow-neu-flat);
  transition: all var(--transition-base);
}

.neu-list-item:hover {
  box-shadow: var(--shadow-neu-raised);
}

/* ========== Progress Bar ========== */
.neu-progress {
  height: 8px;
  background: var(--color-surface);
  border-radius: var(--radius-full);
  box-shadow: var(--shadow-neu-pressed);
  overflow: hidden;
}

.neu-progress-fill {
  height: 100%;
  background: linear-gradient(90deg, var(--color-accent), var(--color-accent-light));
  border-radius: var(--radius-full);
  transition: width var(--transition-slow);
}

/* ========== Play Button - Accent ========== */
.play-btn {
  width: 64px;
  height: 64px;
  background: var(--color-accent);
  color: white;
  border: none;
  border-radius: var(--radius-full);
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  box-shadow: var(--shadow-accent-glow);
  transition: all var(--transition-base);
}

.play-btn:hover {
  background: var(--color-accent-light);
  transform: scale(1.05);
  box-shadow: 0 12px 36px rgba(255, 107, 84, 0.5);
}

/* ========== Badge/Tag ========== */
.neu-badge {
  display: inline-flex;
  align-items: center;
  gap: var(--space-1);
  padding: var(--space-1) var(--space-3);
  background: var(--color-surface);
  border-radius: var(--radius-full);
  font-size: var(--text-xs);
  font-weight: 500;
  color: var(--color-text-tertiary);
  box-shadow: var(--shadow-neu-raised-sm);
}

.neu-badge-accent {
  background: var(--color-accent);
  color: white;
  box-shadow: var(--shadow-accent-glow);
}

/* ========== Scrollbar ========== */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: var(--color-bg-base);
  border-radius: var(--radius-full);
}

::-webkit-scrollbar-thumb {
  background: var(--color-bg-dark);
  border-radius: var(--radius-full);
}

::-webkit-scrollbar-thumb:hover {
  background: var(--color-text-muted);
}

/* ========== Animation Classes ========== */
@keyframes float {

  0%,
  100% {
    transform: translateY(0);
  }

  50% {
    transform: translateY(-8px);
  }
}

@keyframes pulse-glow {

  0%,
  100% {
    box-shadow: 0 0 0 0 rgba(255, 107, 84, 0.4);
  }

  50% {
    box-shadow: 0 0 0 12px rgba(255, 107, 84, 0);
  }
}

.animate-float {
  animation: float 3s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

/* ========== Utility Classes ========== */
.text-accent {
  color: var(--color-accent);
}

.bg-accent {
  background: var(--color-accent);
}

.rounded-full {
  border-radius: var(--radius-full);
}

.rounded-xl {
  border-radius: var(--radius-xl);
}

.rounded-2xl {
  border-radius: var(--radius-2xl);
}

.shadow-neu {
  box-shadow: var(--shadow-neu-raised);
}

.shadow-neu-sm {
  box-shadow: var(--shadow-neu-raised-sm);
}

.shadow-neu-pressed {
  box-shadow: var(--shadow-neu-pressed);
}

.shadow-glow {
  box-shadow: var(--shadow-accent-glow);
}

/* ========== Reduced Motion Support ========== */
@media (prefers-reduced-motion: reduce) {

  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* ========== Glassmorphic Utilities ========== */
.glass {
  background: rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(16px) saturate(180%);
  -webkit-backdrop-filter: blur(16px) saturate(180%);
  border: 1px solid rgba(255, 255, 255, 0.15);
}

.glass-dark {
  background: rgba(26, 29, 36, 0.85);
  backdrop-filter: blur(20px) saturate(180%);
  -webkit-backdrop-filter: blur(20px) saturate(180%);
  border: 1px solid rgba(255, 255, 255, 0.08);
}

.glass-card {
  background: rgba(255, 255, 255, 0.05);
  backdrop-filter: blur(24px);
  -webkit-backdrop-filter: blur(24px);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: var(--radius-xl);
  box-shadow:
    0 8px 32px rgba(0, 0, 0, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

/* ========== Main Content Wrapper ========== */
.main-content {
  min-height: 100vh;
  padding-bottom: 100px;
  /* Space for bottom nav */
}

@media (min-width: 769px) {
  .main-content {
    padding-bottom: 0;
  }
}

/* ========== Color RGB Values for Glass Effects ========== */
:root {
  --color-bg-elevated-rgb: 228, 233, 240;
}

[data-theme="dark"] {
  --color-bg-elevated-rgb: 26, 29, 36;
}

/* ========== Morphic Card Enhancements ========== */
.morphic-card {
  background: linear-gradient(145deg,
      var(--color-surface-raised) 0%,
      var(--color-surface) 100%);
  border-radius: var(--radius-xl);
  box-shadow: var(--shadow-neu-raised);
  border: 1px solid rgba(255, 255, 255, 0.1);
  transition: all var(--transition-base);
}

.morphic-card:hover {
  transform: translateY(-4px);
  box-shadow:
    12px 12px 24px rgba(163, 177, 198, 0.5),
    -12px -12px 24px rgba(255, 255, 255, 0.7),
    0 12px 40px rgba(255, 107, 84, 0.1);
}

/* ========== Glow Effects ========== */
.glow-accent {
  box-shadow: 0 0 20px rgba(255, 107, 84, 0.3);
}

.glow-accent-lg {
  box-shadow: 0 0 40px rgba(255, 107, 84, 0.4);
}

/* ========== Gradient Text ========== */
.gradient-text {
  background: linear-gradient(135deg, var(--color-accent) 0%, var(--color-secondary) 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

/* ========== Shimmer Animation ========== */
@keyframes shimmer {
  0% {
    transform: translateX(-100%);
  }

  100% {
    transform: translateX(100%);
  }
}

.shimmer {
  position: relative;
  overflow: hidden;
}

.shimmer::after {
  content: "";
  position: absolute;
  inset: 0;
  background: linear-gradient(90deg,
      transparent 0%,
      rgba(255, 255, 255, 0.1) 50%,
      transparent 100%);
  animation: shimmer 2s infinite;
}